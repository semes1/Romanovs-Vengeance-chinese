nacnst:
	Inherits: ^ConstructionYard
	Buildable:
		BuildPaletteOrder: 20
	ProvidesPrerequisite@soviets:
		Prerequisite: structures.soviets
	Production:
		Produces: Building.Soviets, Support.Soviets, Support.Baku
	ProductionQueue@Building:
		Type: Building.Soviets
	ProductionQueue@Support:
		Type: Support.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, cuba, libya, iraq, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@SupportBaku:
		Type: Support.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Support
		LowPowerModifier: 200
		ReadyAudio: ConstructionComplete
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Building:
		ProductionType: Building.Soviets
	ProductionBar@Support:
		ProductionType: Support.Soviets
	ProductionBar@SupportBaku:
		ProductionType: Support.Baku
	Transforms:
		IntoActor: smcv
	WithIdleOverlay@top:
		Sequence: idle-top
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@normal:
		Sequence: idle-normal
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithBuildingPlacedAnimation:
		RequiresCondition: !build-incomplete
	GrantConditionOnFaction@USSR:
		Condition: russia
		Factions: russia
	GrantConditionOnFaction@Iraq:
		Condition: iraq
		Factions: iraq
	GrantConditionOnFaction@Vietnam:
		Condition: vietnam
		Factions: vietnam
	GrantConditionOnFaction@Cuba:
		Condition: cuba
		Factions: cuba
	GrantConditionOnFaction@Libya:
		Condition: libya
		Factions: libya
	GrantConditionOnFaction@Chile:
		Condition: chile
		Factions: chile
	GrantConditionOnFaction@Mexico:
		Condition: mexico
		Factions: mexico
	GrantConditionOnFaction@Mongolia:
		Condition: mongolia
		Factions: mongolia
	GrantConditionOnFaction@Transcaucasia:
		Condition: transcaucus
		Factions: transcaucus
	GrantConditionOnFaction@Turkmenistan:
		Condition: turkmen
		Factions: turkmen
	GrantConditionOnFaction@Tuva:
		Condition: tuva
		Factions: tuva
	GrantConditionOnFaction@Russia:
		Condition: russianfed
		Factions: russianfed
	GrantConditionOnFaction@Serbia:
		Condition: serbia
		Factions: serbia
	WithIdleOverlay@USSR:
		Sequence: flag-russia
		Palette: ussr
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && russia
	WithIdleOverlay@Iraq:
		Sequence: flag-iraq
		Palette: iraq
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && iraq
	WithIdleOverlay@Vietnam:
		Sequence: flag-vietnam
		Palette: vietnam
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && vietnam
	WithIdleOverlay@Cuba:
		Sequence: flag-cuba
		Palette: cuba
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && cuba
	WithIdleOverlay@Libya:
		Sequence: flag-libya
		Palette: libya
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && libya
	WithIdleOverlay@Chile:
		Sequence: flag-chile
		Palette: chile
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && chile
	WithIdleOverlay@Mexico:
		Sequence: flag-mexico
		Palette: mexico
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && mexico
	WithIdleOverlay@Mongolia:
		Sequence: flag-mongolia
		Palette: mongolia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && mongolia
	WithIdleOverlay@Transcaucasia:
		Sequence: flag-transcaucus
		Palette: transcaucasia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && transcaucus
	WithIdleOverlay@Turkmenistan:
		Sequence: flag-turkmen
		Palette: turkmenistan
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && turkmen
	WithIdleOverlay@Tuva:
		Sequence: flag-tuva
		Palette: tuva
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && tuva
	WithIdleOverlay@Russia:
		Sequence: flag-russianfed
		Palette: russia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && russianfed
	WithIdleOverlay@Serbia:
		Sequence: flag-serbia
		Palette: serbia
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && serbia
	WithIdleOverlay@FlagShadow:
		Sequence: flag-shadow
		Palette: shadow
		IsPlayerPalette: false
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && (russia || iraq || vietnam || cuba || libya || chile || mexico || mongolia || transcaucus || turkmen || tuva || russianfed || serbia)
	WithIdleOverlay@HNS:
		Sequence: idle-hns
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && (russia || iraq || vietnam || cuba || libya || chile || mexico || mongolia)
	WithIdleOverlay@Star:
		Sequence: idle-star
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete && (transcaucus || turkmen || tuva || russianfed || serbia)
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: SovietConstructionYardVoice
	RenderSprites:
		Image: nacnst

napowr:
	Inherits: ^PowerPlant
	Inherits@SHAPE: ^3x2Shape
	Buildable:
		Queue: Building.Soviets
		Description: 为基地其他建筑提供电力\n\n可以变更朝向
	Tooltip:
		Name: 特斯拉反应炉
	Tooltip@NoRow:
		Name: 特斯拉反应炉
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: napowb
	IsometricSelectable:
		DecorationHeight: 45
	Voiced:
		VoiceSet: PowerPlantVoice
		Volume: 0.8

nahand:
	Inherits: ^Barracks
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Building.Soviets
		Description: 训练步兵\n\n提供一个步兵生产排程\n只能训练与建筑工厂之阵营相同阵营的步兵
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Exit@1:
		SpawnOffset: -512,768,0
		ExitCell: 1,2
		Priority: 2
	Exit@2:
		SpawnOffset: -512,768,0
		ExitCell: 0,2
		Priority: 2
	Exit@fallback1:
		SpawnOffset: 0,724,0
		ExitCell: 2,2
	Exit@fallback2:
		SpawnOffset: 0,724,0
		ExitCell: 2,1
	Exit@fallback3:
		SpawnOffset: 724,0,0
		ExitCell: 2,0
	Exit@fallback4:
		SpawnOffset: 724,0,0
		ExitCell: 2,-1
	Exit@fallback5:
		SpawnOffset: 724,0,0
		ExitCell: 1,-1
	Exit@fallback6:
		SpawnOffset: 0,-724,0
		ExitCell: 0,-1
	Exit@fallback7:
		SpawnOffset: 0,-724,0
		ExitCell: -1,-1
	Exit@fallback8:
		SpawnOffset: 0,-724,0
		ExitCell: -1,0
	Exit@fallback9:
		SpawnOffset: -724,0,0
		ExitCell: -1,1
	Exit@fallback10:
		SpawnOffset: -724,0,0
		ExitCell: -1,2
	Production:
		Produces: Infantry.Soviets, Infantry.Cuba, Infantry.Iraq, Infantry.Baku, Infantry.Tuva
	ProductionQueue:
		Type: Infantry.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, libya, russia, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@Cuba:
		Type: Infantry.Cuba
		Factions: cuba
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Infantry.Iraq
		Factions: iraq
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Baku:
		Type: Infantry.Baku
		Factions: transcaucus, turkmen, russianfed, serbia
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Tuva:
		Type: Infantry.Tuva
		Factions: tuva
		Group: Infantry
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Infantry.Soviets
	ProductionBar@Cuba:
		ProductionType: Infantry.Cuba
	ProductionBar@Iraq:
		ProductionType: Infantry.Iraq
	ProductionBar@Baku:
		ProductionType: Infantry.Baku
	ProductionBar@Tuva:
		ProductionType: Infantry.Tuva
	RallyPoint:
		Path: 3,3
	ProvidesPrerequisite@nahand:
		Prerequisite: nahand
	ProvidesPrerequisite@mwfacref:
		Prerequisite: narefn
	IsometricSelectable:
		DecorationHeight: 135

narefn:
	Inherits: ^Refinery
	Buildable:
		Queue: Building.Soviets
	FreeActor:
		Actor: harv
	SmokeParticleEmitter@refinerysmoke1:
		Offset: -1024,-384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: 128,-1408,4096
	PlaceBuildingVariants:
		Actors: narefb #, narefc, narefd
	IsometricSelectable:
		DecorationHeight: 90

naradr:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 60
		Prerequisites: power, narefn, ~techlevel.2, ~!ai.naradr
		Description: 苏联科技建筑\n\n提供战术地图\n解锁阵营独有支援能力\n需要电力供应\n解锁科技升级
		BuildDuration: 750
		BuildDurationModifier: 100
	ProvidesPrerequisite@AIbuildinglimit:
		RequiresCondition: ai-control
		Prerequisite: ai.naradr
	Valued:
		Cost: 1500
	Tooltip:
		Name: 苏联雷达站
	Tooltip@NoRow:
		Name: 苏联雷达站
	ProvidesPrerequisite:
		Prerequisite: radar
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@russia:
		Prerequisite: radar.russia
		Factions: russia
	ProvidesPrerequisite@iraq:
		Prerequisite: radar.iraq
		Factions: iraq
	ProvidesPrerequisite@vietnam:
		Prerequisite: radar.vietnam
		Factions: vietnam
	ProvidesPrerequisite@cuba:
		Prerequisite: radar.cuba
		Factions: cuba
	ProvidesPrerequisite@libya:
		Prerequisite: radar.libya
		Factions: libya
	ProvidesPrerequisite@baku:
		Prerequisite: radar.baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
	ProvidesPrerequisite@upgrade.russia:
		Prerequisite: upgrade.russia
		Factions: russia
	ProvidesPrerequisite@upgrade.iraq:
		Prerequisite: upgrade.iraq
		Factions: iraq
	ProvidesPrerequisite@upgrade.vietnam:
		Prerequisite: upgrade.vietnam
		Factions: vietnam
	ProvidesPrerequisite@upgrade.cuba:
		Prerequisite: upgrade.cuba
		Factions: cuba
	ProvidesPrerequisite@upgrade.libya:
		Prerequisite: upgrade.libya
		Factions: libya
	ProvidesPrerequisite@upgrade.soviets:
		Prerequisite: upgrade.soviets
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 100000
	Armor:
		Type: Wood
	ExternalCondition@disableradar:
		Condition: disableradar
	ProvidesRadar:
		RequiresCondition: !disabled && !chronodisable && !disableradar
	RevealsShroud:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 10c0
	SupportPowerChargeBar:
	ParatroopersPower@tesladrop:
		OrderName: RussianTeslaDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.russia
		Icons:
			1: tesladrop
		ChargeInterval: 4500
		Descriptions:
			1: 特斯拉小队空投
		LongDescs:
			1: 一架运输机在选定位置投放1辆特斯拉坦克和3名特斯拉步兵
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: ParatroopersReady
		DropItems:
			1: shk, shk, shk, ttnk
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		UnitTypes:
			1: pdplane
		CameraActor: camera
		DisplayBeacon: True
		BeaconPosters:
			1: tesdicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	NukePower@radiationmissile:
		OrderName: IraqiRadMissile
		Cursor: nuke
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.iraq
		Icons:
			1: radmissile
		ChargeInterval: 6000
		Descriptions:
			1: 化武飞弹
		LongDescs:
			1: 在选定位置投放一枚化武飞弹\n飞弹命中后将遗留下一片辐射区
		LaunchSound: sradlaun.wav
		SelectTargetSpeechNotification: SelectTarget
		MissileWeapon: RadiationMissile
		MissilePalette: player
		IsPlayerPalette: true
		CameraRange: 8c0
		CameraRemoveDelay: 200
		FlightVelocity: 1c0
		FlightDelay: 100
		DisplayBeacon: True
		BeaconPosters:
			1: radmicon
		ArrowSequence: arrow
		ClockSequence: clock
		TrailInterval: 0
		TrailImage: smokeyrad
		TrailSequences: idle
		CircleRanges:
			1: 4c0
		CircleColor: FFFFFFFF
		CircleBorderColor: 00000060
	DetonateWeaponPower@instanbunker:
		OrderName: VietnameseInstantBunker
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.vietnam
		Icons:
			1: bunker
		ChargeInterval: 3000
		Descriptions:
			1: 战地碉堡
		LongDescs:
			1: 立刻在选定位置建造一座战地碉堡\n可以容纳5名步兵在其中战斗\n免疫清除驻军效果\n战地碉堡可以维修\n出售战地碉堡将不会获得资金
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: BunkerSpawner
		ActivationSequence:
	DetonateWeaponPower@ambush:
		OrderName: LibyanAmbush
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.libya
		Icons:
			1: ambush
		ChargeInterval: 6000
		Descriptions:
			1: 游击队突袭
		LongDescs:
			1: 立刻在选定位置部署一支游击队\n游击队由9名动员兵和6名防空步兵组成
		SelectTargetSpeechNotification: SelectTarget
		Weapons:
			1: AmbushSpawner
		ActivationSequence:
		CameraRange: 8c0
		CameraRemoveDelay: 25
	GrantExternalConditionPower@deathbombs:
		OrderName: CubanDeathBombs
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.cuba
		Icons:
			1: deathbombs
		ChargeInterval: 3000
		Descriptions:
			1: 革命之怒
		LongDescs:
			1: 在选定的友方单位上部署自杀式炸弹\n自杀式炸弹将在单位阵亡时引爆\n炸弹将会造成友军伤害
		SelectTargetSpeechNotification: SelectTarget
		Durations:
			1: -1
		Conditions:
			1: deathbombs
		Dimensions:
			1: 3,3
		Footprints:
			1: _x_ xxx _x_
		OnFireSound: icraatta.wav
	AirstrikePowerRV@clustermines:
		ActivationDelay: 125
		OrderName: CubanClusterMines
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: disabled
		Icons:
			1: cluster
		ChargeInterval: 4500
		Descriptions:
			1: 集束地雷空投
		LongDescs:
			1: 一架运输机在选定位置一次性投放13枚地雷
		SelectTargetSpeechNotification: SelectTarget
		IncomingSpeechNotification: WarningEnemyAirstrikeInitiated
		UnitTypes:
			1: pdplane.cluster_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.5c0
		DisplayBeacon: True
		BeaconPosters:
			1: mineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	AirstrikePower@leafletdrop:
		OrderName: BakuPactLeafletDrop
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: radar.baku
		Icons:
			1: leaflet
		ChargeInterval: 3750
		Descriptions:
			1: 宣传品空投
		LongDescs:
			1: 一架运输机在选定位置投放心战宣传品\n降低敌方单位的移动速度与攻击速度
		SelectTargetSpeechNotification: SelectTarget
		IncomingSpeechNotification: WarningEnemyAirstrikeInitiated
		UnitTypes:
			1: pdplane.leaflet.baku
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: CAMERA
		CameraRemoveDelay: 100
		DisplayBeacon: True
		BeaconPosters:
			1: leaficon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate
	InfiltrateForExploration:
		Types: SpyInfiltrate
		InfiltratedNotification: RadarSabotaged
		InfiltrationNotification: BuildingInfiltratedRadarSabotaged
	Power:
		Amount: -75
		RequiresCondition: !chronodisable
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: RadarVoice
		Volume: 0.8

mine:
	Inherits@1: ^SpriteActor
	Interactable:
		Bounds: 579, 1158
	WithSpriteBody:
	HiddenUnderFog:
	RevealsShroud:
		Range: 1c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 1c0
	Mine:
		CrushClasses: mine
		DetonateClasses: mine
		BlockFriendly: false
	Health:
		HP: 5000
		NotifyAppliedDamage: false
	Armor:
		Type: Light
	Cloak:
		CloakSound:
		UncloakSound:
		Palette:
		InitialDelay: 0
	Tooltip:
		Name: 地雷
		GenericName: 地雷
		RequiresCondition: showownername
	Tooltip@NoRow:
		Name: 地雷
		GenericName: 地雷
		ShowOwnerRow: false
		RequiresCondition: !showownername
	GrantConditionOnPrerequisite@SHOWOWNERNAME:
		Condition: showownername
		Prerequisites: global-showownername
	Targetable:
		TargetTypes: Ground, Mine
	Mobile:
		Speed: 1
		Locomotor: wheeled
	RejectsOrders:
	HitShape:
	MapEditorData:
		Categories: System
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: infantry

naweap:
	Inherits: ^WarFactory
	Buildable:
		Queue: Building.Soviets
	ProvidesPrerequisite@naweap:
		Prerequisite: naweap
	Production:
		Produces: Vehicle.Soviets, Vehicle.USSR, Vehicle.Iraq, Vehicle.Cuba, Vehicle.Libya, Vehicle.Baku
	ProductionQueue:
		Type: Vehicle.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, vietnam, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
	ProductionQueue@USSR:
		Type: Vehicle.USSR
		Factions: russia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Iraq:
		Type: Vehicle.Iraq
		Factions: iraq
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Cuba:
		Type: Vehicle.Cuba
		Factions: cuba
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Vehicle.Libya
		Factions: libya
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Baku:
		Type: Vehicle.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Vehicle
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Vehicle.Soviets
	ProductionBar@USSR:
		ProductionType: Vehicle.USSR
	ProductionBar@Iraq:
		ProductionType: Vehicle.Iraq
	ProductionBar@Cuba:
		ProductionType: Vehicle.Cuba
	ProductionBar@Libya:
		ProductionType: Vehicle.Libya
	ProductionBar@Baku:
		ProductionType: Vehicle.Baku
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: naweab #, naweac, nawead
	IsometricSelectable:
		DecorationHeight: 90

nayard:
	Inherits: ^Shipyard
	Buildable:
		Queue: Building.Soviets
	Production:
		Produces: Ship.Soviets
	ProductionQueue:
		Type: Ship.Soviets
	ProductionBar:
		ProductionType: Ship.Soviets
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	AirstrikePower@navalmines:
		OrderName: SovietNavalMines
		PauseOnCondition: chronodisable
		Icons:
			1: navalmines
		Prerequisites:
			1: nayard
		ChargeInterval: 3000
		Descriptions:
			1: 水雷空投
		LongDescs:
			1: 在指定水域空投5枚水雷
		SelectTargetSpeechNotification: SelectTarget
		UnitTypes:
			1: pdplane.naval_mines
		SquadSizes:
			1: 1
		QuantizedFacings: 8
		CameraActor: camera.5c0
		DisplayBeacon: True
		BeaconPosters:
			1: nmineicon
		ArrowSequence: arrow
		ClockSequence: clock
		UseDirectionalTarget: True
		DirectionArrowAnimation: swdirection
		DirectionArrowPalette: mouse
	IsometricSelectable:
		DecorationHeight: 120

nmine:
	Inherits: mine
	Mine:
		CrushClasses: nmine
		DetonateClasses: nmine
	Tooltip:
		Name: 水雷
	Tooltip@NoRow:
		Name: 水雷
	RevealsShroud:
		Range: 3c0
	# RevealsShroudToIntelligenceOwner:
	#	Range: 3c0
	Targetable:
		TargetTypes: Ground, Water, Underwater, Mine
	-Mobile:
	Building:
		Footprint: x
		Dimensions: 1,1
		TerrainTypes: Water
	Cloak:
		CloakTypes: Cloak, Underwater
	Explodes:
		Weapon: MineExplosion
	RenderSprites:
		PlayerPalette: player

nadept:
	Inherits: ^ServiceDepot
	Inherits@SHAPE: ^4x3Shape
	HitShape:
		TargetableOffsets: 0,0,0, -360,360,0, 360,-360,0, -1080,1080,0, -360,1800,0, -1800,360,0, 360,1080,0, -360,-1080,0, 1080,360,0, -1080,-360,0
	Buildable:
		Queue: Building.Soviets
		Prerequisites: naweap, ~techlevel.1
		Description: 消耗资金以高效修复各类载具\n\n可以变更朝向\n\n·特殊能力：解除寄生（恐怖机器人）
	ProvidesPrerequisite@default:
		Prerequisite: nadept
	Building:
		Footprint: x+++ x+++ x+++
		Dimensions: 4,3
	RallyPoint:
		Path: 4,1
	WithSpriteBody:
		PauseOnCondition: chronodisable
	WithIdleOverlay@normal:
		Sequence: idle-normal
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	PlaceBuildingVariants:
		Actors: nadepb
	IsometricSelectable:
		DecorationHeight: 90

naheli:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@SPY: ^DisabledByInfiltration
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 100
		Prerequisites: naradr, ~techlevel.2
		Description: 制造飞行器\n\n提供一个苏联飞行器生产排程
		BuildDuration: 125
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: 苏联飞机制造厂
	Tooltip@NoRow:
		Name: 苏联飞机制造厂
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@production:
		Prerequisite: production
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	Health:
		HP: 75000
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Armor:
		Type: Wood
	Reservable:
	RallyPoint:
		Path: 3,1
		Palette: mouse
		IsPlayerPalette: false
	Exit@1:
		Facing: 640
		ExitCell: 1,1
		SpawnOffset: -384,128,0
	GrantExternalConditionToProduced:
		Condition: produced
	Production:
		Produces: Aircraft.Soviets, Aircraft.USSR, Aircraft.Vietnam, Aircraft.Cuba, Aircraft.Libya, Aircraft.Baku
		PauseOnCondition: chronodisable || infiltrated
	ProductionQueue:
		Type: Aircraft.Soviets
		Factions: america, germany, england, france, korea, japan, belarus, poland, ukraine, aussie, china, turkey, canada, iraq, chile, mexico, mongolia, psicorps, psinepal, psisouth, psitrans, psimoon
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@USSR:
		Type: Aircraft.USSR
		Factions: russia
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Vietnam:
		Type: Aircraft.Vietnam
		Factions: vietnam
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Cuba:
		Type: Aircraft.Cuba
		Factions: cuba
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Libya:
		Type: Aircraft.Libya
		Factions: libya
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Baku:
		Type: Aircraft.Baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
		Group: Aircraft
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		BlockedAudio: NoBuild
		LimitedAudio: BuildingInProgress
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar:
		ProductionType: Aircraft.Soviets
	ProductionBar@USSR:
		ProductionType: Aircraft.USSR
	ProductionBar@Vietnam:
		ProductionType: Aircraft.Vietnam
	ProductionBar@Cuba:
		ProductionType: Aircraft.Cuba
	ProductionBar@Libya:
		ProductionType: Aircraft.Libya
	ProductionBar@Baku:
		ProductionType: Aircraft.Baku
	Power:
		Amount: -50
		RequiresCondition: !chronodisable
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@dish:
		Sequence: idle-dish
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	IsometricSelectable:
		DecorationHeight: 60
	Voiced:
		VoiceSet: AirfieldVoice
		Volume: 0.8

nanrct:
	Inherits: ^PowerPlant
	Inherits@SHAPE: ^4x4Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 110
		Prerequisites: natech, ~techlevel.3
		BuildDuration: 1000
	Valued:
		Cost: 1500
	Tooltip:
		Name: 大型核能反应堆
	Tooltip@NoRow:
		Name: 大型核能反应堆
	Building:
		Footprint: xxxx xxxx xxxx _xx_
		Dimensions: 4,4
	Health:
		HP: 100000
	Armor:
		Type: Concrete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Explodes:
		Type: CenterPosition
		Weapon: NukePayload
		EmptyWeapon: NukePayload
	Power:
		Amount: 1000
	IsometricSelectable:
		DecorationHeight: 60
	Voiced:
		VoiceSet: NuclearReactorVoice
		Volume: 0.8

natech:
	Inherits: ^BattleLab
	Inherits@SHAPE: ^3x3Shape
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Soviets
		Prerequisites: production, naradr, ~techlevel.3, ~!ai.natech
		Description: 高级科技建筑\n\n解锁科技升级
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@upgrade.soviets:
		Prerequisite: upgrade.soviets
	ProvidesPrerequisite@upgrade.russia:
		Prerequisite: upgrade.russia
		Factions: russia
	ProvidesPrerequisite@upgrade.iraq:
		Prerequisite: upgrade.iraq
		Factions: iraq
	ProvidesPrerequisite@upgrade.vietnam:
		Prerequisite: upgrade.vietnam
		Factions: vietnam
	ProvidesPrerequisite@upgrade.cuba:
		Prerequisite: upgrade.cuba
		Factions: cuba
	ProvidesPrerequisite@upgrade.libya:
		Prerequisite: upgrade.libya
		Factions: libya
	ProvidesPrerequisite@AIbuildinglimit:
		RequiresCondition: ai-control
		Prerequisite: ai.natech
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	InfiltrateForSupportPower:
		Proxy: soviets.tech.infiltrated
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: TechCenterVoice
		Volume: 0.8

naclon:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Building.Unused # Building.Soviets, Building.Baku
		BuildPaletteOrder: 120
		Prerequisites: natech
		Description: 复制绝大部分训练完毕的步兵\n\n可以回收步兵以获取其造价一半的资金\n无法回收工程师\n回收军犬获得的资金较少\n同一玩家最多只能同时拥有一个
		BuildLimit: 1
	Valued:
		Cost: 2000
	Tooltip:
		Name: 苏联复制工厂
	Tooltip@NoRow:
		Name: 苏联复制工厂
	Building:
		Footprint: xx xx
		Dimensions: 2, 2
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	ExitsDebugOverlay:
	Exit@1:
		SpawnOffset: -640,640,0
		ExitCell: 1,2
		Priority: 2
	Exit@2:
		SpawnOffset: -640,640,0
		ExitCell: 0,2
		Priority: 2
	Exit@fallback1:
		SpawnOffset: 0,724,0
		ExitCell: 2,2
	Exit@fallback2:
		SpawnOffset: 0,724,0
		ExitCell: 2,1
	Exit@fallback3:
		SpawnOffset: 724,0,0
		ExitCell: 2,0
	Exit@fallback4:
		SpawnOffset: 724,0,0
		ExitCell: 2,-1
	Exit@fallback5:
		SpawnOffset: 724,0,0
		ExitCell: 1,-1
	Exit@fallback6:
		SpawnOffset: 0,-724,0
		ExitCell: 0,-1
	Exit@fallback7:
		SpawnOffset: 0,-724,0
		ExitCell: -1,-1
	Exit@fallback8:
		SpawnOffset: 0,-724,0
		ExitCell: -1,0
	Exit@fallback9:
		SpawnOffset: -724,0,0
		ExitCell: -1,1
	Exit@fallback10:
		SpawnOffset: -724,0,0
		ExitCell: -1,2
	WithSpriteBody:
		PauseOnCondition: chronodisable
	Production:
		Produces: Clone.Soviets
	RallyPoint:
		Path: 3,3
		Palette: mouse
		IsPlayerPalette: false
	ClonesProducedUnits:
		CloneableTypes: Infantry
		ProductionType: Clone.Soviets
	AcceptsDeliveredCash:
	IsometricSelectable:
		DecorationHeight: 90
	Voiced:
		VoiceSet: CloningVatsVoice
		Volume: 0.8

napsis:
	Inherits: ^BaseBuilding
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Support.Unused # Support.Soviets, Support.Baku
		BuildPaletteOrder: 80
		Prerequisites: natech, ~techlevel.4
		Description: 侦测敌方单位与建筑的动向
	Valued:
		Cost: 1500
	Tooltip:
		Name: 灵能探测仪
	Tooltip@NoRow:
		Name: 灵能探测仪
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 50000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	GpsASProvider:
		RequiresCondition: !disabled && !build-incomplete && !chronodisable
	RenderDetectionCircle:
	WithRangeCircle:
		Range: 25c0
		Type: sensor
	DetectCloaked:
		CloakTypes: Cloak, Underwater
		Range: 25c0
	WithIdleOverlay@spin:
		Sequence: idle-spin
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: PsychicSensorVoice
		Volume: 0.8

nairon:
	Inherits: ^SecondarySuperWeapon
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: natech, !enoughiron, ~techlevel.5
		Description: 一种可以生成保护屏障的高科技装置\n\n需要电力供应\n必定会被揭示给敌对玩家\n\n·提供 超级武器：铁幕
	Tooltip:
		Name: 铁幕装置
	Tooltip@NoRow:
		Name: 铁幕装置
	WithSpriteBody:
		PauseOnCondition: chronodisable
	GrantExternalConditionPower@IRONCURTAIN:
		Icons:
			1: invuln
		Prerequisites:
			1: nairon
		Cursor: iron-curtain
		ChargeInterval: 6000
		Descriptions:
			1: 铁幕
		LongDescs:
			1: 使3x3范围内的载具与建筑在20秒内免疫伤害\n绝大部分步兵单位将因此死亡
		AllowMultiple: true
		Durations:
			1: 500
		Conditions:
			1: invulnerability
		Dimensions:
			1: 3,3
		Footprints:
			1: xxx xxx xxx
		ValidRelationships: Ally, Neutral, Enemy
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: IronCurtainReady
		LaunchSpeechNotification: IronCurtainActivated
		IncomingSpeechNotification: IronCurtainActivated
		EndChargeSound: siroread.wav
		OnFireSound: siroon.wav
		EffectImage: explosion
		EffectSequence: ironblast
		EffectPalette: effect
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayRadarPing: True
		PauseOnCondition: disabled || chronodisable
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughiron
	NotificationAnnouncement:
		Notification: IronCurtainDetected
	IsometricSelectable:
		DecorationHeight: 75
	Voiced:
		VoiceSet: IronCurtainDeviceVoice
		Volume: 0.8

namisl:
	Inherits: ^PrimarySuperWeapon
	Buildable:
		Queue: Support.Soviets
		Prerequisites: natech, !enoughnuke, ~techlevel.5
		Description: 制造、组装并发射核弹的场所\n\n需要电力供应\n必定会被揭示给敌对玩家\n\n·提供 超级武器：核弹攻击
	Tooltip:
		Name: 核弹发射井
	Tooltip@NoRow:
		Name: 核弹发射井
	NukePower:
		Prerequisites:
			1: namisl
		Cursor: nuke
		Icons:
			1: abomb
		ChargeInterval: 9000
		Descriptions:
			1: 核弹攻击
		LongDescs:
			1: 向目标区域发射一枚毁灭性的核弹\n核弹爆炸后将留下一片辐射区
		AllowMultiple: true
		EndChargeSound: snukread.wav
		LaunchSound: snuklaun.wav
		SelectTargetSpeechNotification: SelectTarget
		EndChargeSpeechNotification: NuclearMissileReady
		LaunchSpeechNotification: NuclearMissileLaunched
		IncomingSpeechNotification: NuclearMissileLaunched
		MissileWeapon: atomic
		MissilePalette: player
		SpawnOffset: 0,0,-1c0
		IsPlayerPalette: true
		DisplayTimerRelationships: Ally, Neutral, Enemy
		DisplayBeacon: True
		DisplayRadarPing: True
		BeaconPosters:
			1: nukeicon
		ArrowSequence: arrow
		ClockSequence: clock
		CameraRange: 10c0
		CameraRemoveDelay: 200
		PauseOnCondition: disabled || chronodisable
		FlightDelay: 250
		FlightVelocity: 1c0
		TrailInterval: 1
		TrailImage: nukepuff
		TrailSequences: idle
		CircleRanges:
			1: 10c0
		CircleColor: FFFFFFFF
		CircleBorderColor: 00000060
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughnuke
	NotificationAnnouncement:
		Notification: NuclearSiloDetected
	WithSupportPowerActivationOverlay:
		Sequence: smoke
		Palette: effect50alpha
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: NuclearSiloVoice
		Volume: 0.8

nawall:
	Inherits: ^Wall
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 10
		Description: 阻止步兵与载具通过\n并可以阻挡枪炮类型的火力
	Tooltip:
		Name: 苏联围墙
	Tooltip@NoRow:
		Name: 苏联围墙
	LineBuild:
		NodeTypes: nawall
	LineBuildNode:
		Types: nawall
	WithWallSpriteBody:
		Type: nawall
	Replaceable:
		Types: SovietGate

naflak:
	Inherits: ^VoxelLighting
	Inherits@AUTOTARGET: ^AutoTargetAir
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 60
		Prerequisites: naradr, ~techlevel.2
		Description: 速射防空武器\n\n仅能对空\n需要电力供应\n侦测隐形\n\n·强势对抗：飞行器\n·弱势对抗：地面单位
		BuildDuration: 375
		BuildDurationModifier: 100
	Valued:
		Cost: 700
	Tooltip:
		Name: 高射炮
	Tooltip@NoRow:
		Name: 高射炮
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	Turreted:
		TurnSpeed: 40
		InitialFacing: 896
		Offset: 450,0,0
		RealignDelay: -1
	AttackTurreted:
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Armament:
		Weapon: FlakWeapon
		LocalOffset: 640,0,1536
		MuzzleSequence: muzzle
	WithMuzzleOverlay:
	BodyOrientation:
		QuantizedFacings: 16
	RenderVoxels:
	WithVoxelTurret:
		RequiresCondition: !build-incomplete
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithRangeCircle:
		Range: 12c0
		Type: aa
	AutoTarget:
	Power:
		Amount: -30
		RequiresCondition: !chronodisable
	RequiresBuildableArea:
		Adjacent: 3
	IsometricSelectable:
		Class: naflak
		DecorationHeight: 60
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	DetectCloaked:
		Range: 5c0
		RequiresCondition: !disabled
	RenderDetectionCircle:
	Voiced:
		VoiceSet: FlakCannonVoice
		Volume: 0.8

tesla:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@OVERCHARGE: ^AffectedByOvercharge
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 70
		Prerequisites: naradr, ~techlevel.3
		Description: 先进基地防御\n\n无法对空\n侦测隐形\n可以从特斯拉步兵和特斯拉突击队的充能中获取增益\n在有电力供应的情况下，3名特斯拉步兵的充能可以使特斯拉线圈的伤害最大化\n最大充能的伤害是未充能状态的两倍\n没有充能的情况下需要电力供应\n缺乏电力的情况下，1名特斯拉步兵的充能即可使线圈正常工作\n\n·强势对抗：地面目标、舰艇\n·弱势对抗：飞行器\n\n·特殊能力：特斯拉充能
		BuildDuration: 625
		BuildDurationModifier: 100
	Valued:
		Cost: 1500
	Tooltip:
		Name: 特斯拉线圈
	Tooltip@NoRow:
		Name: 特斯拉线圈
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 8c0
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: CoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && !overcharge
	Armament@charged:
		Weapon: CoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && overcharge
	Armament@1:
		Weapon: OPCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && !overcharge
	Armament@1charged:
		Weapon: OPCoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && overcharge
	Armament@2:
		Weapon: OPerCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && !overcharge
	Armament@2charged:
		Weapon: OPerCoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && overcharge
	Armament@3:
		Weapon: OPestCoilBolt
		LocalOffset: 0,0,3072
		RequiresCondition: !lowpower && charged >= 3 && !overcharge
	Armament@3charged:
		Weapon: OPestCoilBoltCharged
		LocalOffset: 0,0,3072
		RequiresCondition: !lowpower && charged >= 3 && overcharge
	AttackTesla:
		MaxCharges: 3
		ReloadDelay: 80
		ChargeAudio: btespow.wav
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	DetectCloaked:
		Range: 7c0
		RequiresCondition: !disabled
	RenderDetectionCircle:
	AutoTarget:
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithRangeCircle:
		Range: 8c0
		Type: teslacoil
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	WithRangeCircle@1:
		Range: 8c512
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	WithRangeCircle@2:
		Range: 9c0
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	WithRangeCircle@3:
		Range: 9c512
		Type: teslacoil
		RequiresCondition: !lowpower && charged >= 3
	Power:
		Amount: -75
		RequiresCondition: !chronodisable
	WithIdleOverlay@powered:
		Sequence: idle-powered
		PauseOnCondition: chronodisable
		RequiresCondition: !disabled && !build-incomplete
	ExternalCondition@CHARGED:
		Condition: charged
		SourceCap: 1
	IsometricSelectable:
		Class: tesla
		DecorationHeight: 75
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8

nalasr:
	Inherits: ^SupportBuilding
	Inherits@APBULLETS: ^AffectedByAPBullets
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 50
		Prerequisites: nahand, ~techlevel.1
		Description: 全自动反步兵防御\n\n侦测隐形\n\n·强势对抗：步兵、轻型载具\n·弱势对抗：装甲载具、飞行器、舰艇
		BuildDuration: 250
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: 哨卫机枪
	Tooltip@NoRow:
		Name: 哨卫机枪
	Health:
		HP: 40000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 7c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 7c0
	Turreted:
		TurnSpeed: 40
		InitialFacing: 896
		Offset: 0,0,0
		RealignDelay: -1
	AttackTurreted:
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	Armament:
		Weapon: vulcan
		LocalOffset: 702,128,768, 702,-128,768
		MuzzleSequence: muzzle
	WithMuzzleOverlay:
	DetectCloaked:
		Range: 5c0
	RenderDetectionCircle:
	BodyOrientation:
		QuantizedFacings: 16
	WithSpriteTurret:
		RequiresCondition: !build-incomplete
	WithRangeCircle:
		Range: 6c0
		Type: pillbox
	AutoTarget:
	RequiresBuildableArea:
		Adjacent: 4
	IsometricSelectable:
		Class: nalasr
		DecorationHeight: 30
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: SentryGunVoice
		Volume: 0.8

# Yuri's Revenge Structures
nabnkr:
	Inherits: ^SupportBuilding
	Inherits@AUTOTARGET: ^AutoTargetAll
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Support.Unused # Support.Soviets, Support.Baku
		BuildPaletteOrder: 40
		Prerequisites: nahand, ~techlevel.1
		Description: 立刻在选定位置建造一座战地碉堡\n\n可以容纳5名步兵在其中战斗\n免疫清除驻军效果
	Valued:
		Cost: 500
	CustomSellValue:
		Value: 0
	Tooltip:
		Name: 战地碉堡
	Tooltip@NoRow:
		Name: 战地碉堡
	Building:
		Footprint: xx xx
		Dimensions: 2,2
		TerrainTypes: Clear, Rough, Road, DirtRoad
	Health:
		HP: 60000
	Armor:
		Type: Steel
	Cargo:
		Types: Garrisoner
		MaxWeight: 6
		InitialUnits: e2
		AfterLoadDelay: 0
		BeforeUnloadDelay: 0
		AfterUnloadDelay: 0
		EjectOnDeath: true
		LoadedCondition: loaded
	WithCargoSounds:
		EnterSound: ugarris.wav
		ExitSound: ugarris.wav
	-SpawnActorsOnSell@allies:
	-SpawnActorsOnSell@soviets:
	-SpawnActorsOnSell@psicorps:
	WithRangeCircle:
		Range: 6c0
	WithSpriteBody:
	WithIdleOverlay@Garrisoned:
		Sequence: garrisoned
		RequiresCondition: loaded && !build-incomplete
	AttackOpenTopped:
		Armaments: garrisoned, garrisoned-secondary
		PortOffsets: 768,0,1024, 448,-682,1024, -448,-682,1024, -768,0,1024, -448,682,1024, 448,682,1024
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	WithCargoPipsDecoration:
		EmptySequence: pip-garrison-empty
		FullSequence: pip-garrison-green
		Margin: 4, 3
		PipStride: 4, 2
		Palette: ra
		Position: BottomLeft
		RequiresSelection: true
		CustomPipSequences:
			gray: pip-garrison-gray
			yellow: pip-garrison-yellow
			blue: pip-garrison-blue
			red: pip-garrison-red
	EngineerRepairable:
		RequiresCondition: !ivanbomb && !sealC4 && !commandoC4 && !teslabomb && !toxinbomb && damaged
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical
	IsometricSelectable:
		DecorationHeight: 45
	Voiced:
		VoiceSet: BattleBunkerVoice
		Volume: 0.8

naindp:
	Inherits: ^BaseBuilding
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Building.Soviets
		BuildPaletteOrder: 120
		Prerequisites: narefn, natech, ~techlevel.4
		Description: 降低所有载具25%的造价与建造时间\n\n同一玩家最多只能同时拥有一个\n\n最多只有5个军工车间可以产生效果\n最多可以使得所有载具的价格降低76%
		BuildLimit: 1
		BuildDuration: 1250
		BuildDurationModifier: 100
	Valued:
		Cost: 2000
	Tooltip:
		Name: 军工车间
	Tooltip@NoRow:
		Name: 军工车间
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	WithIdleOverlay@pistons:
		Sequence: idle-pistons
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@lights:
		Sequence: idle-lights
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	GrantExternalConditionToOwner:
		Condition: naindp
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	IsometricSelectable:
		DecorationHeight: 120
	Voiced:
		VoiceSet: IndustrialPlantVoice
		Volume: 0.8

# Custom Structures
nagatea:
	Inherits: ^Gate_A
	Buildable:
		Queue: Support.Soviets, Support.Baku
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 20
		BuildDuration: 125
		BuildDurationModifier: 100
	Tooltip:
		Name: 苏联闸门
	Tooltip@NoRow:
		Name: 苏联闸门
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate
	PlaceBuildingVariants:
		Actors: nagateb

nagateb:
	Inherits: ^Gate_B
	-Buildable:
	Tooltip:
		Name: 苏联闸门
	Tooltip@NoRow:
		Name: 苏联闸门
	LineBuildNode:
		Types: nawall
	WithGateSpriteBody:
		Type: nawall
	Replacement:
		ReplaceableTypes: SovietGate

napost:
	Inherits: ^BaseBuilding
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@OVERCHARGE: ^AffectedByOvercharge
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 40
		Prerequisites: power, ~prerequisite.tesla_fence, ~techlevel.1
		Description: 通过电力在两个节点之间建立特斯拉围栏\n\n需要电力供应\n围栏可以阻止步兵与载具通过并可以阻挡枪炮类型的火力\n围栏不可被破坏但会因节点被破坏或停电而失去作用\n围栏节点具有微弱的攻击能力且可以被特斯拉步兵充能\n\n·强势对抗：无\n·弱势对抗：一切\n\n·特殊能力：特斯拉充能
		BuildDuration: 125
		BuildDurationModifier: 100
	Valued:
		Cost: 200
	Tooltip:
		Name: 特斯拉围栏节点
	Tooltip@NoRow:
		Name: 特斯拉围栏节点
	Health:
		HP: 50000
	Armor:
		Type: Concrete
	LineBuild:
		Range: 10
		NodeTypes: teslafencenode
		SegmentType: nafnce
		SegmentsRequireNode: true
	LineBuildNode:
		Types: teslafencenode
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
		RequiresCondition: !powerdown
	WithTeslaChargeOverlay:
	Armament:
		Weapon: PostBolt
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && !overcharge
	Armament@charged:
		Weapon: PostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 1)) && overcharge
	Armament@1:
		Weapon: OPPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && !overcharge
	Armament@1charged:
		Weapon: OPPostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 1) || (lowpower && charged == 2)) && overcharge
	Armament@2:
		Weapon: OPerPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && !overcharge
	Armament@2charged:
		Weapon: OPerPostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: ((!lowpower && charged == 2) || (lowpower && charged >= 3)) && overcharge
	Armament@3:
		Weapon: OPestPostBolt
		LocalOffset: 0,0,30
		RequiresCondition: !lowpower && charged >= 3 && !overcharge
	Armament@3charged:
		Weapon: OPestPostBoltCharged
		LocalOffset: 0,0,30
		RequiresCondition: !lowpower && charged >= 3 && overcharge
	AttackTesla:
		MaxCharges: 1
		ReloadDelay: 80
		ChargeAudio: btespow.wav
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	Power:
		Amount: -10
		RequiresCondition: !chronodisable
	RevealsShroud:
		Range: 4c0
	WithIdleOverlay@LIGHTS:
		Sequence: lights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@CHAINOFLIGHTS:
		Sequence: chainoflights
		PauseOnCondition: disabled || chronodisable
		RequiresCondition: !build-incomplete
	LineBuildSegmentExternalCondition:
		RequiresCondition: !build-incomplete && !disabled
		Condition: active-posts
	RequiresBuildableArea:
		Adjacent: 6
	IsometricSelectable:
		DecorationHeight: 30
	GrantConditionOnPowerState@LOWPOWER:
		RequiresCondition: !charged
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	WithRangeCircle:
		Range: 3c0
		Type: teslacoil
		RequiresCondition: (!lowpower && !charged) || (lowpower && charged == 1)
	WithRangeCircle@1:
		Range: 3c512
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 1) || (lowpower && charged == 2)
	WithRangeCircle@2:
		Range: 4c0
		Type: teslacoil
		RequiresCondition: (!lowpower && charged == 2) || (lowpower && charged >= 3)
	WithRangeCircle@3:
		Range: 4c512
		Type: teslacoil
		RequiresCondition: !lowpower && charged >= 3
	ExternalCondition@CHARGED:
		Condition: charged
		SourceCap: 1
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8

nafnce:
	Inherits: ^Wall
	Tooltip:
		Name: 特斯拉围栏
	Tooltip@NoRow:
		Name: 特斯拉围栏
	LineBuild:
		NodeTypes: teslafence
	LineBuildNode:
		Types: teslafence
	-Crushable:
	-Sellable:
	-Targetable:
	-Building:
	Explodes:
		Weapon: UnitExplodeSmall
		EmptyWeapon: UnitExplodeSmall
	EnergyWall:
		ActiveCondition: active-posts == 2
		Weapon: TeslaFence
	GrantConditionOnLineBuildDirection@X:
		Direction: X
		Condition: teslafence-direction-x
	GrantConditionOnLineBuildDirection@Y:
		Direction: Y
		Condition: teslafence-direction-y
	-WithWallSpriteBody:
	ExternalCondition@ACTIVE:
		Condition: active-posts
	WithWallSpriteBody@XENABLED:
		RequiresCondition: teslafence-direction-x && active-posts == 2
		Type: teslafence
		Sequence: enabled-x
		Name: x-enabled
	WithWallSpriteBody@YENABLED:
		RequiresCondition: teslafence-direction-y && active-posts == 2
		Type: teslafence
		Sequence: enabled-y
		Name: y-enabled
	WithSpriteBody@XDISABLED:
		RequiresCondition: teslafence-direction-x && active-posts < 2
		Sequence: disabled-x
		Name: x-disabled
	WithSpriteBody@YDISABLED:
		RequiresCondition: teslafence-direction-y && active-posts < 2
		Sequence: disabled-y
		Name: y-disabled
	BlocksProjectiles:
		RequiresCondition: active-posts == 2
	DamageMultiplier: # Prevent all normal damage, but still allows direct kills from the post
		Modifier: 0
	Interactable:
		Bounds: 1158, 1158

nasilo:
	Inherits: ^Silo
	Buildable:
		Queue: Support.Soviets, Support.Baku
	GrantConditionOnFaction@Soviets:
		Condition: soviets
		Factions: russia, iraq, vietnam, cuba, libya, chile, mexico, mongolia
	GrantConditionOnFaction@Baku:
		Condition: baku
		Factions: transcaucus, turkmen, tuva, russianfed, serbia
	WithIdleOverlay@Soviets:
		Sequence: idle-hns
		RequiresCondition: !build-incomplete && soviets
	WithIdleOverlay@Baku:
		Sequence: idle-star
		RequiresCondition: !build-incomplete && baku
	IsometricSelectable:
		DecorationHeight: 45

naprop:
	Inherits: ^SupportBuilding
	Inherits@DRAIN: ^DiskDrainable
	Inherits@EMPULSE: ^DisabledByEMP
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Soviets, Support.Baku
		BuildPaletteOrder: 80
		Prerequisites: natech, ~techlevel.4
		Description: 激励友方单位并提供增益\n\n需要电力供应\n战地宣传光环能提升友方单位33%的攻击速度\n战地宣传光环能为友方单位提供治疗\n可以与指挥官能力的增益叠加\n\n·特殊能力：战地宣传光环
		BuildDuration: 125
		BuildDurationModifier: 100
	Building:
		TerrainTypes: Clear, Rough, Road, DirtRoad
	Valued:
		Cost: 500
	Tooltip:
		Name: 战地宣传塔
	Tooltip@NoRow:
		Name: 战地宣传塔
	Building:
		Footprint: x
		Dimensions: 1, 1
	Health:
		HP: 60000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 8c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 7c0
	ProximityExternalCondition@propaganda_tower:
		Condition: propaganda_tower
		Range: 8c0
		RequiresCondition: !disabled && !chronodisable
	WithRangeCircle:
		Range: 8c0
		Type: propaganda
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown || emp || diskdrain
	Capturable:
		Types: building
		RequiresCondition: !build-incomplete && !invulnerability && !forceshield
	CaptureNotification:
	Targetable:
		TargetTypes: Ground, C4, DetonateAttack, Structure, NonGarrisonableStructure
	Power:
		Amount: -25
		RequiresCondition: !chronodisable
	GpsDotAS:
		Sequence: Structure
	IsometricSelectable:
		DecorationHeight: 75

naexpn:
	Inherits: ^ExpansionNode
	# Transforms:
	#	IntoActor: exps
	RenderSprites:
		Image: gaexpn
	Voiced:
		VoiceSet: SovietExpansionNodeVoice

napowb:
	Inherits: napowr
	Inherits@SHAPE: ^2x3Shape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xx xx xx
		Dimensions: 2,3

narefb:
	Inherits: ^RefineryB
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: 1024,-384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: -128,-1408,4096
	IsometricSelectable:
		DecorationHeight: 90

narefc:
	Inherits: ^RefineryC
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: 1024,384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: -128,1408,4096
	IsometricSelectable:
		DecorationHeight: 90

narefd:
	Inherits: ^RefineryD
	FreeActor:
		Actor: harv
	ProvidesPrerequisite@narefn:
		Prerequisite: narefn
	SmokeParticleEmitter@refinerysmoke1:
		Offset: -1024,384,4096
	SmokeParticleEmitter@refinerysmoke2:
		Offset: 128,1408,4096
	IsometricSelectable:
		DecorationHeight: 90

naweab:
	Inherits: naweap
	Inherits@SHAPE: ^FlippedFactoryXShape
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx xxx xxx xxx ===
		Dimensions: 3,5
	RallyPoint:
		Path: 1,6
	Exit@1:
		ExitCell: 1,4

naweac:
	Inherits: naweap
	Inherits@SHAPE: ^FlippedFactoryShape
	-Buildable:
	-PlaceBuildingVariants:
	-WithExitOverlay@front:
	-WithExitOverlay@top:
	-WithIdleOverlay@bib:
	WithIdleOverlay@lights:
		Sequence: idle-flag
	Building:
		Footprint: =xxxx =xxxx =xxxx
	RallyPoint:
		Path: -2,1
	Exit@1:
		ExitCell: 0,1

nawead:
	Inherits: naweab
	Inherits@SHAPE: ^FlippedFactoryYShape
	-WithExitOverlay@front:
	-WithExitOverlay@top:
	-WithIdleOverlay@bib:
	WithIdleOverlay@lights:
		Sequence: idle-flag
	Building:
		Footprint: === xxx xxx xxx xxx
	RallyPoint:
		Path: 1,-2
	Exit@1:
		ExitCell: 1,0

nadepb:
	Inherits: nadept
	Inherits@SHAPE: ^3x4Shape
	HitShape:
		TargetableOffsets: 0,0,0, 360,360,0, -360,-360,0, -1080,-1080,0, -360,-1800,0, -1800,-360,0, 360,-1080,0, -360,1080,0, -1080,360,0, 1080,-360,0
	-Buildable:
	-PlaceBuildingVariants:
	Building:
		Footprint: xxx +++ +++ +++
		Dimensions: 3,4
	RallyPoint:
		Path: 1,4
